
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>miiCloud API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#persons" class="toc-h1 toc-link" data-title="Persons">Persons</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#enroll-a-person" class="toc-h2 toc-link" data-title="Enroll a Person">Enroll a Person</a>
                  </li>
                  <li>
                    <a href="#find-matching-faces" class="toc-h2 toc-link" data-title="Find Matching Faces">Find Matching Faces</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href="mailto:dev@miicloud.io?Subject=Create%20Sandbox%20Dev%20Token">Request a Developer Token</a></li>
            <li><a href='https://github.com/lord/slate'>Docs Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='overview'>Overview</h1>
<p>Welcome!</p>

<p>miiCloud is a Computer Vision company that leverages Deep Learning for image and video analysis.  We train and calibrate our models on an extensive data pipeline to bring the best technology to our customers.  </p>

<p>This guide provides an overview of using the miiCloud Application Programming Interface (API), related operations, request and response structures and sample code.  The API is organized around REST and returns JSON encoded responses. The current version of the API is 20190315v02</p>

<p>We will continue to add new APIs to this site on a weekly basis.  If you have specific requests for your business, please contact us: dev@miicloud.io</p>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="c"># The 'requests' library helps to create &amp; parse json objects easily</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">auth_token</span> <span class="o">=</span> <span class="s">'Token 0e653da4969a757d21de0ffa6387d5fbd6401131'</span>
<span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="n">auth_token</span><span class="p">},</span> <span class="n">json</span> <span class="o">=</span> <span class="n">enrollment_payload</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
 curl -X POST <span class="se">\</span>
  api_endpoint <span class="se">\</span>
  -H <span class="s1">'authorization: Token 0e653da4969a757d21de0ffa6387d5fbd6401131'</span> <span class="se">\ </span> 
</code></pre>
<p>miiCloud uses API tokens to allow access to our API. You can request a unique API token by emailing dev@miicloud.io</p>

<p>miiCloud expects for the API token to be included in all API requests to the server in a header that looks like the following:</p>

<p><code>Authorization: Token 0e653da4969a757d21de0ffa6387d5fbd6401131</code></p>

<aside class="notice">
Note the API token listed here is public.  You can use it or request a unique token at no cost by emailing dev@miicloud.io
</aside>
<h1 id='persons'>Persons</h1><h2 id='enroll-a-person'>Enroll a Person</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">auth_token</span> <span class="o">=</span> <span class="s">'Token 0e653da4969a757d21de0ffa6387d5fbd6401131'</span>
<span class="n">image_path</span> <span class="o">=</span> <span class="s">'input/persons/image_001.jpg'</span>
<span class="n">enroll_endpoint</span> <span class="o">=</span> <span class="s">'http://sandbox.miicloud.io/miicloud/enroll'</span>
<span class="n">enrollment_payload</span> <span class="o">=</span> 
<span class="p">{</span> 
    <span class="s">'customer_person_id'</span><span class="p">:</span> <span class="s">'1234567'</span><span class="p">,</span> 
    <span class="s">'first_name'</span><span class="p">:</span> <span class="s">'John'</span><span class="p">,</span> 
    <span class="s">'last_name'</span><span class="p">:</span> <span class="s">'Doe'</span><span class="p">,</span> 
    <span class="s">'email'</span><span class="p">:</span> <span class="s">'test@domain.com'</span><span class="p">,</span> 
    <span class="s">'phone'</span><span class="p">:</span> <span class="s">'0123456789'</span> 
<span class="p">}</span>
<span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
<span class="nb">file</span> <span class="o">=</span> <span class="p">{</span><span class="s">'image_path'</span><span class="p">:</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">),</span> <span class="s">"multipart/form-data"</span><span class="p">)}</span>
<span class="n">enroll_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">enroll_endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="n">auth_token</span><span class="p">},</span> <span class="n">data</span> <span class="o">=</span> <span class="n">enrollment_payload</span><span class="p">,</span> <span class="n">files</span> <span class="o">=</span> <span class="nb">file</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
api_endpoint <span class="se">\</span>
-H <span class="s1">'authorization: Token 0e653da4969a757d21de0ffa6387d5fbd6401131'</span> <span class="se">\</span>
-F <span class="nv">customer_person_id</span><span class="o">=</span>1234567
-F <span class="nv">image_path</span><span class="o">=</span> input/persons/image_001.jpg <span class="se">\</span>
-F <span class="nv">first_name</span><span class="o">=</span>John <span class="se">\</span>
-F <span class="nv">last_name</span><span class="o">=</span>Doe <span class="se">\</span>
-F <span class="nv">email</span><span class="o">=</span><span class="nb">test</span>@domain.com <span class="se">\</span>
-F <span class="nv">phone</span><span class="o">=</span>0123456789 <span class="se">\</span>
</code></pre>
<p>Identifies the largest face in a given image and adds it to the database.  If a human face is not found, it returns a “fail” status.  In order to provide high accuracy for subsequent matches, during enrollment, a face must be presented with a frontal pose with area of the face consisting of eye brows, eyes, nose and lips. </p>

<blockquote>
<p>The above request returns a JSON object structured as follows:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">379</span><span class="p">,</span><span class="w">
    </span><span class="s2">"left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w">
    </span><span class="s2">"right_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">647</span><span class="p">,</span><span class="w">
    </span><span class="s2">"right_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">529</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"person_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a298260-6986-41d4-972e-6f0910293362"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_person_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre><h3 id='sandbox-api-endpoint'>Sandbox API Endpoint</h3>
<p><code>POST http://sandbox.miicloud.io/miicloud/enroll</code></p>
<h3 id='production-api-endpoint'>Production API Endpoint</h3>
<p><code>Please contact dev@miicloud.io</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>authorization</td>
<td>Yes</td>
<td>a unique api token per miiCloud customer</td>
</tr>
<tr>
<td>customer_person_id</td>
<td>Yes</td>
<td>a unique identified maintained by the customer per person enrolled in the database.  This identifier allows you link multiple images of an individual to their identity and link other identifiable info such as name, etc.</td>
</tr>
<tr>
<td>image_path</td>
<td>Yes</td>
<td>local or remote destination of the image accessible by your application</td>
</tr>
<tr>
<td>first_name</td>
<td>No</td>
<td>first name associated with the person being added to database</td>
</tr>
<tr>
<td>last_name</td>
<td>No</td>
<td>last name associated with the person being added to database</td>
</tr>
<tr>
<td>email</td>
<td>No</td>
<td>email associated with the person being added to database</td>
</tr>
<tr>
<td>phone</td>
<td>No</td>
<td>phone # associated with the person being added to database</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>Yes</td>
<td>response by API whether it was successful or not</td>
</tr>
<tr>
<td>bounding_box</td>
<td>No</td>
<td>an object with bounding box coordinates around the face</td>
</tr>
<tr>
<td>left_x</td>
<td>No</td>
<td>x-coordinate of the bounding box’s top left corner</td>
</tr>
<tr>
<td>left_ y</td>
<td>No</td>
<td>y-coordinate of the bounding box’s top left corner</td>
</tr>
<tr>
<td>right_x</td>
<td>No</td>
<td>x-coordinate of the bounding box’s bottom right corner</td>
</tr>
<tr>
<td>right_y</td>
<td>No</td>
<td>y-coordinate of the bounding box’s bottom right corner</td>
</tr>
<tr>
<td>person_id</td>
<td>No</td>
<td>unique identifier stored in miiCloud per person.  This identifier links the identity in the customer’s system to miiCloud.</td>
</tr>
<tr>
<td>customer_person_id</td>
<td>No</td>
<td>a unique identified maintained by the customer per person enrolled in the database.  miiCloud returns this identifier in the response to allow the customer to validate correct identities were linked</td>
</tr>
</tbody></table>
<h2 id='find-matching-faces'>Find Matching Faces</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">auth_token</span> <span class="o">=</span> <span class="s">'Token 0e653da4969a757d21de0ffa6387d5fbd6401131'</span>
<span class="n">image_path</span> <span class="o">=</span> <span class="s">'input/test_images/test_img_001.jpg'</span>
<span class="n">math_faces_endpoint</span> <span class="o">=</span> <span class="s">'http://sandbox.miicloud.io/miicloud/match_faces'</span>

<span class="n">match_faces_payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">'image_path'</span><span class="p">:</span> <span class="n">image_path</span><span class="p">}</span>
<span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
<span class="nb">file</span> <span class="o">=</span> <span class="p">{</span><span class="s">'image_path'</span><span class="p">:</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">),</span> <span class="s">"multipart/form-data"</span><span class="p">)}</span>

<span class="n">match_faces_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">match_faces_endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="n">auth_token</span><span class="p">},</span> <span class="n">data</span> <span class="o">=</span> <span class="n">match_faces_payload</span><span class="p">,</span> <span class="n">files</span> <span class="o">=</span> <span class="nb">file</span><span class="p">)</span>

</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
  api_endpoint <span class="se">\</span>
  -H <span class="s1">'authorization: Token 0e653da4969a757d21de0ffa6387d5fbd6401131'</span> <span class="se">\</span>
  -F <span class="nv">image_path</span><span class="o">=</span> usr/local/app/data/test_img_0001.jpg

</code></pre>
<blockquote>
<p>The above request returns a JSON object structured as follows:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"faces"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
        </span><span class="s2">"match_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"known"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">464</span><span class="p">,</span><span class="w">
            </span><span class="s2">"left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">291</span><span class="p">,</span><span class="w">
            </span><span class="s2">"right_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">688</span><span class="p">,</span><span class="w">
            </span><span class="s2">"right_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">515</span><span class="w">
            </span><span class="p">},</span><span class="w">
        </span><span class="s2">"person_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a298260-6986-41d4-972e-6f0910293362"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"customer_person_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567"</span><span class="p">,</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>Matches the faces in a given image against the faces in the database for one or more matches.  </p>
<h3 id='sandbox-api-endpoint-2'>Sandbox API Endpoint</h3>
<p><code>POST http://sandbox.miicloud.io/miicloud/match_faces</code></p>
<h3 id='production-api-endpoint-2'>Production API Endpoint</h3>
<p><code>Please contact dev@miicloud.io</code></p>
<h3 id='request-parameters-2'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>authorization</td>
<td>Yes</td>
<td>a unique api token per miiCloud customer</td>
</tr>
<tr>
<td>image_path</td>
<td>Yes</td>
<td>local or remote destination of the image accessible by your application</td>
</tr>
</tbody></table>
<h3 id='response-2'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>Yes</td>
<td>&quot;success&quot; if at least 1 face was matched, else &quot;fail&quot;</td>
</tr>
<tr>
<td>faces</td>
<td>No</td>
<td>returns an array if 1 or more faces is found in the image</td>
</tr>
<tr>
<td>match_status</td>
<td>No</td>
<td>if the face(s) in the image matche with 1 or more known person(s) in the database; values are: &quot;known&quot; or &quot;uknown&quot;</td>
</tr>
<tr>
<td>bounding_box</td>
<td>No</td>
<td>an object with bounding box coordinates around the face</td>
</tr>
<tr>
<td>left_x</td>
<td>No</td>
<td>x-coordinate of the bounding box’s top left corner</td>
</tr>
<tr>
<td>left_ y</td>
<td>No</td>
<td>y-coordinate of the bounding box’s top left corner</td>
</tr>
<tr>
<td>right_x</td>
<td>No</td>
<td>x-coordinate of the bounding box’s bottom right corner</td>
</tr>
<tr>
<td>right_y</td>
<td>No</td>
<td>y-coordinate of the bounding box’s bottom right corner</td>
</tr>
<tr>
<td>person_id</td>
<td>No</td>
<td>unique identifier stored in miiCloud per person.  This identifier links the identity in the customer’s system to miiCloud.</td>
</tr>
<tr>
<td>customer_person_id</td>
<td>No</td>
<td>a unique identified maintained by the customer per person enrolled in the database.  miiCloud returns this identifier in the response to allow the customer to validate correct identities were linked</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<p>miiCloud API uses the following error codes.  Please contact dev@miicloud.io if you experience any issues.</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- The request has 1 or more incorrect parameters.  Double check the correct parameters are being passed in the request.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- The API key is invalid.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The requested object is only available with administrators access.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified API / object could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- An invalid methos was used to access the API.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- The request was not formatted in JSON.</td>
</tr>
<tr>
<td>415</td>
<td>Unsupported Media Type -- The file format of the image / video is not supported by the API.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
